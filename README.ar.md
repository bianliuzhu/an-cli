# an-cli

[็ฎไฝไธญๆ](./README.zh.md) | [English](./README.md) | [Espaรฑol](./README.es.md) | ุงูุนุฑุจูุฉ | [Franรงais](./README.fr.md) | [ะัััะบะธะน](./README.ru.md) | [ๆฅๆฌ่ช](./README.jp.md)

## ุงููุตู

an-cli ูู ุฃุฏุงุฉ ุณุทุฑ ุฃูุงูุฑ ูููุงุฌูุงุช ุงูุฃูุงููุฉ ูุชููุฑ ุงูุฃูุงูุฑ ุงูุชุงููุฉ:

> `anl type`: ุฃุฏุงุฉ CLI ุชููููุฏ ุชููุงุฆููุง ุชุนุฑููุงุช ุงูุฃููุงุน TypeScript ูุฏูุงู ุทูุจุงุช API ุงุนุชูุงุฏูุง ุนูู ููู Swagger/OpenAPI JSON.

> `anl lint`: ุชููุดุฆ ุฅุนุฏุงุฏุงุช ESLint ูStylelint ูPrettier ูCommitLint ูVSCode ููุดุงุฑูุน React ุฃู Vue.

> `anl git`: ุชููุดุฆ ุฅุนุฏุงุฏุงุช Git ูุญููุฉ ุชุดูู ูุฑูุน gitflow ุงูููุงุณูุฉ ูููุถูุนุงุช ุฑุณุงุฆู ุงูุงูุชุฒุงู ูุฃูุงูุฑ Git ูุฎุตุตุฉ.

## ุงูููุฒุงุช

- `anl type`
  - ๐ ุชุญููู ุชููุงุฆู ููููุงุช Swagger JSON
  - ๐ฆ ุชูููุฏ ูููุงุช ุชุนุฑูู ุงูุฃููุงุน TypeScript
  - ๐ ุชูููุฏ ุฏูุงู ุทูุจุงุช API ุขููุฉ ุงูุฃููุงุน
  - ๐ฏ ุฏุนู ูุนุงููุงุช ุงููุณุงุฑ ูุงูุงุณุชุนูุงู ููุชู ุงูุทูุจ
  - ๐ ุชูููุฏ ุชููุงุฆู ูุชุนุฑููุงุช ุงูุชุนุฏุงุฏุงุช
  - ๐จ ุฏุนู ุชูุณูู ุงูุดููุฑุฉ
  - โก๏ธ ุฏุนู ุฑูุน ุงููููุงุช
  - ๐ ุฎูุงุฑุงุช ุชูููุฏ ูุงุจูุฉ ููุชููุฆุฉ

- `anl lint`
  - ๐ ุฅุนุฏุงุฏ ุฃุฏูุงุช ุงููุญุต ุงูุจุฑูุฌู ุจููุฑุฉ ูุงุญุฏุฉ
  - ๐จ ุชููุฆุฉ ุชููุงุฆูุฉ ูู ESLint
  - ๐ฏ ุฅุนุฏุงุฏุงุช Prettier
  - ๐ ูุนุงููุฑ ุฑุณุงุฆู ุงูุงูุชุฒุงู ุนุจุฑ CommitLint
  - ๐ฆ ุฅุนุฏุงุฏุงุช ูุญุฑุฑ VSCode

## ุงูุชุซุจูุช

> ููุงุญุธุฉ
>
> ูุชุทูุจ ุงูุชุซุจูุช ุนุงููููุง

```bash
$ npm install anl -g

$ yarn global add anl
```

## ุฏููู ุงูุงุณุชุฎุฏุงู

> ุชูููุญ
>
> 1. ุฅู ูุงูุช ูุฐู ุฃูู ูุฑุฉุ ูููุฐ ุงูุฃูุฑ ุฃูููุง ููุนุงููุฉ ุงูุชุบููุฑุงุช ุนูู ูุดุฑูุนูุ ุซู ุนุฏูู ุงูุฅุนุฏุงุฏุงุช ุจุญุณุจ ุงูุชูุซูู ูุฃุนุฏ ุงูุชูููุฏ ุญุชู ุชุตู ููุดูู ุงููุทููุจ.
> 2. ุฃู ุงุชุจุน ุงูุฎุทูุงุช ุฃุฏูุงู ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู.

# ุฃูุฑ anl type

## ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู

1. ุชูููุฐ ุงูุฃูุฑ

```bash
$ anl type
```

2. ุดุฑุญ ููู ุงูุฅุนุฏุงุฏ

- ุนูุฏ ุฃูู ุชุดุบูู ูู `anl type` ุณูุชู ุฅูุดุงุก ููู ุฅุนุฏุงุฏ ุจุงุณู `an.config.json` ุชููุงุฆููุง ูู ุฌุฐุฑ ุงููุดุฑูุน (ูููู ุฅูุดุงุคู ูุฏูููุง ุฃูุถูุง).
- ุนูุฏ ุงูุชุดุบูู ุณูุจุญุซ ุนู `an.config.json` ูู ุฌุฐุฑ ุงููุดุฑูุน ูููุฑุฃู ููููููุฏ ุบูุงู Axios ูุงูุฅุนุฏุงุฏุงุช ููุงุฆูุฉ ุงููุงุฌูุงุช ูุฃููุงุน ุงูุทูุจ/ุงูุงุณุชุฌุงุจุฉ.
- ุฌููุน ุงูุญููู ูุงุจูุฉ ููุชุนุฏูู ุจุญุฑูุฉ.

3. ูุซุงู ูููู `an.config.json`

- ูุฌุจ ุฃู ูููู ููู ุงูุฅุนุฏุงุฏ ูู ุฌุฐุฑ ุงููุดุฑูุน.
- ูุง ูููู ุชุบููุฑ ุงุณู ุงูููู.
- ุชูุงุตูู ุงููุนุงููุงุช ูู ูุณู ยซุฎูุงุฑุงุช ุงูุฅุนุฏุงุฏยป.

```json
{
	"saveTypeFolderPath": "apps/types",
	"saveApiListFolderPath": "apps/api/",
	"saveEnumFolderPath": "apps/enums",
	"importEnumPath": "../../enums",
	"swaggerJsonUrl": "https://generator3.swagger.io/openapi.json",
	"requestMethodsImportPath": "./fetch",
	"dataLevel": "serve",
	"formatting": {
		"indentation": "\t",
		"lineEnding": "\n"
	},
	"headers": {},
	"includeInterface": [
		{
			"path": "/api/user",
			"method": "get"
		}
	],
	"excludeInterface": [
		{
			"path": "/api/admin",
			"method": "post"
		}
	]
}
```

3. ุญุฏูุซ ุงูุฅุนุฏุงุฏ ุญุณุจ ุงูุญุงุฌุฉ ุซู ูููุฐ `anl type` ูุฑุฉ ุฃุฎุฑู ูุชูููุฏ ุงูุดููุฑุฉ ููู ุงูุฅุนุฏุงุฏุงุช.

```bash
$ anl type
```

> ููุงุญุธุฉ
>
> ุฅุฐุง ูู ุชูู ูุชุฃูุฏูุง ูู ุงูุฎูุงุฑุงุชุ ูููุฐ `anl type` ุฃูููุง ูุนุงูู ุงููุฎุฑุฌุงุช ุซู ุนุฏูู ุงูุฎูุงุฑุงุช ูุฃุนุฏ ุงูุชุดุบูู ุญุชู ุชุตู ููุง ุชุฑูุฏ.

## ุฎูุงุฑุงุช ุงูุฅุนุฏุงุฏ

| ุงูุฎูุงุฑ                   | ุงูููุน                                 | ุฅูุฒุงูู  | ุงููุตู                         |
| ------------------------ | ------------------------------------- | ------- | ----------------------------- | --- | ---------------------- |
| saveTypeFolderPath       | string                                | ูุนู     | ูุณุงุฑ ุญูุธ ูููุงุช ุชุนุฑูู ุงูุฃููุงุน  |
| saveApiListFolderPath    | string                                | ูุนู     | ูุณุงุฑ ุญูุธ ูููุงุช ุฏูุงู ุทูุจุงุช API |
| saveEnumFolderPath       | string                                | ูุนู     | ูุณุงุฑ ุญูุธ ูููุงุช ุงูุชุนุฏุงุฏุงุช      |
| importEnumPath           | string                                | ูุนู     | ูุณุงุฑ ุงูุงุณุชูุฑุงุฏ ููุชุนุฏุงุฏุงุช      |
| swaggerJsonUrl           | string                                | ูุนู     | ุฑุงุจุท ููู Swagger JSON         |
| requestMethodsImportPath | string                                | ูุนู     | ูุณุงุฑ ุงูุงุณุชูุฑุงุฏ ูุทุฑุงุฆู ุงูุทูุจ   |
| dataLevel                | 'data'                                | 'serve' | 'axios'                       | ูุนู | ูุณุชูู ุจูุงูุงุช ุงูุงุณุชุฌุงุจุฉ |
| formatting               | object                                | ูุง      | ุฅุนุฏุงุฏุงุช ุชูุณูู ุงูุดููุฑุฉ         |
| headers                  | object                                | ูุง      | ุชุฑููุณุงุช ุงูุทูุจ                 |
| includeInterface         | Array<{path: string, method: string}> | ูุง      | ุชูููุฏ ุงููุงุฌูุงุช ุงููุฐููุฑุฉ ููุท   |
| excludeInterface         | Array<{path: string, method: string}> | ูุง      | ุงุณุชุจุนุงุฏ ุงููุงุฌูุงุช ุงููุฐููุฑุฉ     |

## ุจููุฉ ุงููููุงุช ุงููููุฏุฉ

- ูุชู ุชูููุฏ ุงูุจููุฉ ุงูุชุงููุฉ ุงุนุชูุงุฏูุง ุนูู ููู ุงูุฅุนุฏุงุฏ.

```
project/
โโโ apps/
โ   โโโ types/
โ   โ   โโโ models/          # ุฌููุน ุชุนุฑููุงุช ุงูุฃููุงุน (ุนุฏุง ุงูุชุนุฏุงุฏุงุช)
โ   โ   โโโ connectors/      # ุชุนุฑููุงุช ุฃููุงุน ูุงุฌูุงุช API (ุชุนุฑููุงุช ุงููุงุฌูุงุช)
โ   โ   โโโ enums/           # ุชุนุฑููุงุช ุงูุชุนุฏุงุฏุงุช
โ   โโโ api/
โ       โโโ fetch.ts         # ุชูููุฐ ุทุฑุงุฆู ุงูุทูุจ
โ       โโโ index.ts         # ุฏูุงู ุทูุจุงุช API
```

## ุฃูุซูุฉ ุนูู ุงูุดููุฑุฉ ุงููููุฏุฉ

### ุชุนุฑููุงุช ุงูุฃููุงุน

```typescript
declare namespace UserDetail_GET {
	interface Query {
		userId: string;
	}

	interface Response {
		id: string;
		name: string;
		age: number;
		role: UserRole;
	}
}
```

### ุฏุงูุฉ ุทูุจ API

```typescript
import { GET } from './fetch';

/**
 * ุฌูุจ ุชูุงุตูู ุงููุณุชุฎุฏู
 */
export const userDetailGet = (params: UserDetail_GET.Query) => GET<UserDetail_GET.Response>('/user/detail', params);
```

## ูุฒุงูุง ุฅุถุงููุฉ

### ุชุญููู ุงูุฃููุงุน

- ูุฏุนู ุฌููุน ุฃููุงุน ุจูุงูุงุช OpenAPI 3.0
- ูุชุนุงูู ุชููุงุฆููุง ูุน ุงูุฃููุงุน ุงููุชุฏุงุฎูุฉ ุงููุนูุฏุฉ
- ูุฏุนู ุงููุตูููุงุช ูุงููุงุฆูุงุช ูุงูุชุนุฏุงุฏุงุช ูุบูุฑูุง
- ูููููุฏ ุชุนูููุงุช ุงููุงุฌูุงุช ุชููุงุฆููุง

### ุฑูุน ุงููููุงุช

ุนูุฏ ุงูุชุดุงู ุฑูุน ูููุงุชุ ุชูุถุงู ุงูุชุฑููุณุงุช ุงูููุงุณุจุฉ ุชููุงุฆููุง:

```typescript
export const uploadFile = (params: UploadFile.Body) =>
	POST<UploadFile.Response>('/upload', params, {
		headers: { 'Content-Type': 'multipart/form-data' },
	});
```

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

ูููุฑ ุงูุฃุฏุงุฉ ูุนุงูุฌุฉ ูููุฉ ููุฃุฎุทุงุก:

- ุฑุณุงุฆู ุฃุฎุทุงุก ุงูุชุญููู
- ุชุญุฐูุฑุงุช ุนูุฏ ูุดู ุชูููุฏ ุงูุฃููุงุน
- ุงูุชุนุงูู ูุน ุงุณุชุซูุงุกุงุช ูุชุงุจุฉ ุงููููุงุช

### ุชุฑุดูุญ ุงููุงุฌูุงุช

ูููู ุงูุชุญูู ูู ุงููุงุฌูุงุช ุงููููุฏุฉ ุนุจุฑ ุงูุฅุนุฏุงุฏุงุช:

1. ุชุถููู ูุงุฌูุงุช ูุญุฏุฏุฉ
   - ุงุณุชุฎุฏู `includeInterface` ูุชุญุฏูุฏ ุงููุงุฌูุงุช ุงููุฑุงุฏ ุชูููุฏูุง
   - ุณูุชู ุชูููุฏ ุงููุฏุฑุฌุฉ ููุท
   - ุงูุตูุบุฉ: ูุตูููุฉ ูุงุฆูุงุช ุชุญุชูู `path` ู`method`

2. ุงุณุชุจุนุงุฏ ูุงุฌูุงุช ูุญุฏุฏุฉ
   - ุงุณุชุฎุฏู `excludeInterface` ูุชุญุฏูุฏ ุงููุงุฌูุงุช ุงููุณุชุจุนุฏุฉ
   - ุณูุชู ุชูููุฏ ุจููุฉ ุงููุงุฌูุงุช
   - ุงูุตูุบุฉ: ูุตูููุฉ ูุงุฆูุงุช ุชุญุชูู `path` ู`method`

ูุซุงู:

```json
{
	"includeInterface": [
		{
			"path": "/api/user",
			"method": "get"
		}
	],
	"excludeInterface": [
		{
			"path": "/api/admin",
			"method": "post"
		}
	]
}
```

ููุงุญุธุฉ: ูุง ูููู ุงุณุชุฎุฏุงู `includeInterface` ู`excludeInterface` ูุนูุง. ุนูุฏ ูุฌูุฏููุงุ ุชููู ุฃููููุฉ `includeInterface`.

## ุงูุชุทููุฑ

```bash
# ุชุซุจูุช ุงูุงุนุชูุงุฏุงุช
npm install

# ูุถุน ุงูุชุทููุฑ
ุงุถุบุท F5 ูุจุฏุก ุงูุชุตุญูุญ

# ุงูุจูุงุก
npm run build

# ุฑุจุท ูุญูู ููุชุตุญูุญ
npm run blink
```

## ููุงุญุธุงุช

1. ุชุฃูุฏ ูู ุฅููุงููุฉ ุงููุตูู ุฅูู ุฑุงุจุท Swagger JSON
2. ุงููุณุงุฑุงุช ูู ููู ุงูุฅุนุฏุงุฏ ูุณุจูุฉ ุฅูู ุฌุฐุฑ ุงููุดุฑูุน
3. ุณูุชู ุงุณุชุจุฏุงู ุงููููุงุช ุงููููุฏุฉ ูููููุงุช ุงูููุฌูุฏุฉ ุจููุณ ุงูุงุณู
4. ูููุตุญ ุจุฅุถุงูุฉ ุงููููุงุช ุงููููุฏุฉ ุฅูู ูุธุงู ุงูุชุญูู ุจุงูุฅุตุฏุงุฑุงุช

## ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

1. ูุดู ุชูุณูู ูููุงุช ุงูุฃููุงุน ุงููููุฏุฉ
   - ุชุญูู ูู ุชุซุจูุช Prettier
   - ุชุฃูุฏ ูู ูุฌูุฏ ููู ุฅุนุฏุงุฏ Prettier ูู ุงูุฌุฐุฑ

2. ูุณุงุฑ ุงูุงุณุชูุฑุงุฏ ูู ุฏูุงู ุงูุทูุจ ุบูุฑ ุตุญูุญ
   - ุชุญูู ูู ุตุญุฉ `requestMethodsImportPath`
   - ุชุฃูุฏ ูู ูุฌูุฏ ููู ุทุฑุงุฆู ุงูุทูุจ

# ุฃูุฑ anl lint

### ูุธุฑุฉ ุนุงูุฉ

ุฅุนุฏุงุฏ ุณุฑูุน ูุฃุฏูุงุช ุงููุญุต ุงูุจุฑูุฌู ูููุงุฌูุงุช ุงูุฃูุงููุฉุ ุจูุง ูู ุฐูู:

- ESLint ููุญุต ุงูุดููุฑุฉ
- Prettier ูุชูุณูู ุงูุดููุฑุฉ
- CommitLint ููุนุงููุฑ ุฑุณุงุฆู ุงูุงูุชุฒุงู
- ุฅุนุฏุงุฏุงุช ูุญุฑุฑ VSCode

### ุงูุงุณุชุฎุฏุงู

```bash
$ anl lint
```

### ุชูุงุตูู ุงูุฅุนุฏุงุฏ

#### 1. ESLint

- ุชุซุจูุช ุงูุงุนุชูุงุฏุงุช ุงููุทููุจุฉ ุชููุงุฆููุง
- ุฏุนู React/Vue
- ุชูููุฏ `.eslintrc.js` ู `.eslintignore`
- ุฏูุฌ ุฏุนู TypeScript

#### 2. Prettier

- ุชุซุจูุช ุงุนุชูุงุฏุงุช Prettier ุชููุงุฆููุง
- ุชูููุฏ `.prettierrc.js`
- ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ:
  - ุนุฑุถ ุงูุณุทุฑ: 80
  - ุงุณุชุฎุฏุงู Tab
  - ุนูุงูุงุช ุงูุชุจุงุณ ุฃุญุงุฏูุฉ
  - ุฃููุงุณ ุงูุฏูุงู ุงูุณูููุฉ
  - ููุงุนุฏ ุชูุณูู ุฃุฎุฑู

#### 3. CommitLint

- ุชุซุจูุช ุงุนุชูุงุฏุงุช CommitLint
- ุชููุฆุฉ git hooks ุนุจุฑ Husky
- ุชูููุฏ `commitlint.config.js`
- ุชูุญูุฏ ุฑุณุงุฆู ุงูุงูุชุฒุงู

#### 4. VSCode

- ุฅูุดุงุก `.vscode/settings.json`
- ุชูุนูู ุงูุชูุณูู ุงูุชููุงุฆู ุนูุฏ ุงูุญูุธ
- ุถุจุท ุงููููุณูู ุงูุงูุชุฑุงุถู
- ุฏุนู ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช ุงูููุฌูุฏุฉ

# ุฃูุฑ anl git

### ูุธุฑุฉ ุนุงูุฉ

ุชุทุจูู ูุฏุฑุงุช Git ุงูุชุงููุฉ ุนุจุฑ ุงุฎุชูุงุฑ ูุชุนุฏุฏ ุชูุงุนูู:

- ุฅูุดุงุก ูุฑูุน gitflow ุงูููุงุณูุฉ
  - ูุณุฎ `.gitscripts/` ู`.gitconfig` ู`.commit-type.js` ุฅูู ุงููุดุฑูุน (ุฅู ูู ุชูู ููุฌูุฏุฉ)
  - ุฅุนุทุงุก ุตูุงุญูุฉ ุงูุชูููุฐ ูู `.gitscripts/random-branch.sh`
  - ุชูููุฐ `git config --local include.path ../.gitconfig`
- ุถุจุท ููุถูุน ุฑุณุงูุฉ ุงูุงูุชุฒุงู ุชููุงุฆููุง
  - ูุณุฎ `.githooks/commit-msg` ูุถุจุทู ููุงุจู ููุชูููุฐ
  - ุชูููุฐ `git config core.hooksPath .githooks`
- ุฃูุงูุฑ Git ูุฎุตุตุฉ
  - ุฅุถุงูุฉ `.gitattributes` ุฅูู ุงููุดุฑูุน (ุฅู ูู ููู ููุฌูุฏูุง)

### ุงูุงุณุชุฎุฏุงู

```bash
$ anl git
```

ุงุฎุชุฑ ูุธููุฉ ุฃู ุฃูุซุฑ ูู ุงููุงุฆูุฉ. ูู ุชููุดุฃ ุงููููุงุช ุฅูุง ุนูุฏ ุนุฏู ูุฌูุฏูุงุ ูุชุญุงูุธ ุงูุฃุฏุงุฉ ุนูู ุงููููุงุช ุงูููุฌูุฏุฉ.

### ููุงุญุธุงุช

- ููุฑุฌู ุงูุชุดุบูู ุฏุงุฎู ูุณุชูุฏุน Git.
- ุฅุฐุง ูุดูุช ุฃูุงูุฑ ุงูุถุจุท ุงูุชููุงุฆูุ ูููุฐ ูุฏูููุง:

```bash
git config --local include.path ../.gitconfig
git config core.hooksPath .githooks
```

# ุงูุชุฑุฎูุต

ISC License

# ุงููุณุงููุฉ

ูุฑุญุจู ุจู Issues ู Pull Requests: https://github.com/bianliuzhu/an-cli
